2026-02-06 03:16:03,645 - main - INFO - === Logging system initialized ===
2026-02-06 03:16:03,646 - main - INFO - Log file: logs/app_20260206_031603.log
2026-02-06 03:16:03,646 - main - INFO - Log level: INFO
2026-02-06 03:16:03,646 - main - INFO - Timestamp: 20260206_031603
2026-02-06 03:16:04,543 - main - INFO - Included router: routers.aihub.router
2026-02-06 03:16:04,564 - main - INFO - Included router: routers.auth.router
2026-02-06 03:16:04,567 - main - INFO - Included router: routers.health.router
2026-02-06 03:16:04,595 - main - INFO - Included router: routers.settings.router
2026-02-06 03:16:04,656 - main - INFO - Included router: routers.storage.router
2026-02-06 03:16:04,768 - main - INFO - Included router: routers.user.router
2026-02-06 03:16:04,771 - main - INFO - === Application startup initiated ===
2026-02-06 03:16:04,772 - services.database - DEBUG - [DB_OP] Starting database initialization
2026-02-06 03:16:04,772 - services.database - INFO - ðŸ”§ Starting database initialization...
2026-02-06 03:16:04,772 - core.database - INFO - Starting database initialization...
2026-02-06 03:16:04,773 - core.config - DEBUG - Read dynamic attribute database_url from environment variable DATABASE_URL
2026-02-06 03:16:04,773 - core.database - INFO - Normalizing database URL for async compatibility...
2026-02-06 03:16:04,774 - core.database - INFO - Creating async database engine...
2026-02-06 03:16:04,774 - core.database - INFO - Using QueuePool with connection pooling for non-Lambda environment
2026-02-06 03:16:04,900 - core.database - INFO - Database engine created successfully
2026-02-06 03:16:04,901 - core.database - INFO - Creating async session maker...
2026-02-06 03:16:04,901 - core.database - INFO - Async session maker created successfully
2026-02-06 03:16:04,901 - core.database - INFO - Database connection initialized successfully
2026-02-06 03:16:04,901 - services.database - INFO - ðŸ”§ Database connection initialized, now creating tables if tables not exist...
2026-02-06 03:16:04,901 - core.database - DEBUG - [DB_OP] Starting create_tables
2026-02-06 03:16:04,901 - core.database - INFO - ðŸ”§ Starting table creation...
2026-02-06 03:16:06,146 - core.database - INFO - Tables initialized successfully
2026-02-06 03:16:06,146 - core.database - DEBUG - [DB_OP] Create tables completed in 1.2449s
2026-02-06 03:16:06,205 - services.database - INFO - ðŸ”§ Table creation completed
2026-02-06 03:16:06,205 - services.database - INFO - Database initialized successfully
2026-02-06 03:16:06,205 - services.database - DEBUG - [DB_OP] Database initialization completed in 1.4334s
2026-02-06 03:16:06,206 - services.mock_data - INFO - mock_data directory not found, skipping mock initialization
2026-02-06 03:16:06,206 - services.database - DEBUG - [DB_OP] Starting database initialization
2026-02-06 03:16:06,207 - services.database - INFO - ðŸ”§ Starting database initialization...
2026-02-06 03:16:06,207 - core.database - INFO - Starting database initialization...
2026-02-06 03:16:06,207 - core.database - INFO - Database already initialized
2026-02-06 03:16:06,207 - services.database - INFO - ðŸ”§ Database connection initialized, now creating tables if tables not exist...
2026-02-06 03:16:06,208 - core.database - DEBUG - [DB_OP] Starting create_tables
2026-02-06 03:16:06,208 - core.database - INFO - Tables already initialized
2026-02-06 03:16:06,208 - services.database - INFO - ðŸ”§ Table creation completed
2026-02-06 03:16:06,208 - services.database - INFO - Database initialized successfully
2026-02-06 03:16:06,208 - services.database - DEBUG - [DB_OP] Database initialization completed in 0.0020s
2026-02-06 03:16:06,208 - core.config - DEBUG - Read dynamic attribute admin_user_id from environment variable ADMIN_USER_ID
2026-02-06 03:16:06,209 - core.config - DEBUG - Read dynamic attribute admin_user_email from environment variable ADMIN_USER_EMAIL
2026-02-06 03:16:06,628 - services.auth - DEBUG - Admin user 950471 already exists
2026-02-06 03:16:06,690 - main - INFO - === Application startup completed successfully ===
2026-02-06 03:16:11,250 - core.database - DEBUG - [DB_OP] Starting get_db session creation
2026-02-06 03:16:11,251 - core.database - DEBUG - [DB_OP] Database session created successfully in 0.0005s
2026-02-06 03:16:11,251 - routers.auth - INFO - [token/exchange] Received platform token exchange request
2026-02-06 03:16:11,251 - core.config - DEBUG - Read dynamic attribute oidc_issuer_url from environment variable OIDC_ISSUER_URL
2026-02-06 03:16:11,252 - routers.auth - DEBUG - [token/exchange] Verifying token with issuer: https://auth.atoms.dev/api/v1/oidc/platform/tokens/verify
2026-02-06 03:16:13,033 - httpcore.connection - DEBUG - connect_tcp.started host='auth.atoms.dev' port=443 local_address=None timeout=5.0 socket_options=None
2026-02-06 03:16:13,034 - core.database - DEBUG - [DB_OP] Starting get_db session creation
2026-02-06 03:16:13,035 - core.database - DEBUG - [DB_OP] Database session created successfully in 0.0004s
2026-02-06 03:16:13,035 - routers.auth - INFO - [token/exchange] Received platform token exchange request
2026-02-06 03:16:13,035 - routers.auth - DEBUG - [token/exchange] Verifying token with issuer: https://auth.atoms.dev/api/v1/oidc/platform/tokens/verify
2026-02-06 03:16:13,063 - httpcore.connection - DEBUG - connect_tcp.started host='auth.atoms.dev' port=443 local_address=None timeout=5.0 socket_options=None
2026-02-06 03:16:13,067 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f84403d8bb0>
2026-02-06 03:16:13,067 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f84403489c0> server_hostname='auth.atoms.dev' timeout=5.0
2026-02-06 03:16:13,077 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f84403d8fd0>
2026-02-06 03:16:13,078 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-02-06 03:16:13,078 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-02-06 03:16:13,079 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-02-06 03:16:13,080 - httpcore.http11 - DEBUG - send_request_body.complete
2026-02-06 03:16:13,080 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-02-06 03:16:13,084 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f84403ac250>
2026-02-06 03:16:13,084 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f84402a6fc0> server_hostname='auth.atoms.dev' timeout=5.0
2026-02-06 03:16:13,092 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f84403ae7d0>
2026-02-06 03:16:13,093 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-02-06 03:16:13,094 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-02-06 03:16:13,094 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-02-06 03:16:13,094 - httpcore.http11 - DEBUG - send_request_body.complete
2026-02-06 03:16:13,094 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-02-06 03:16:13,105 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 06 Feb 2026 11:16:13 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-response-time', b'0.002s'), (b'x-request-id', b'3e64e237abb14b173289a9fb81fbadc3'), (b'cf-cache-status', b'DYNAMIC'), (b'Content-Encoding', b'gzip'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9c9a3bedb8380f19-LAX')])
2026-02-06 03:16:13,106 - httpx - INFO - HTTP Request: POST https://auth.atoms.dev/api/v1/oidc/platform/tokens/verify "HTTP/1.1 200 OK"
2026-02-06 03:16:13,106 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-02-06 03:16:13,107 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-02-06 03:16:13,107 - httpcore.http11 - DEBUG - response_closed.started
2026-02-06 03:16:13,107 - httpcore.http11 - DEBUG - response_closed.complete
2026-02-06 03:16:13,108 - httpcore.connection - DEBUG - close.started
2026-02-06 03:16:13,108 - httpcore.connection - DEBUG - close.complete
2026-02-06 03:16:13,109 - routers.auth - DEBUG - [token/exchange] Issuer response status: 200
2026-02-06 03:16:13,109 - routers.auth - DEBUG - [token/exchange] Issuer response body: {'success': True, 'data': {'exp': 1772967888, 'user_id': 950471, 'email': '1926375372cgy@gmail.com', 'pv': 0}, 'message': 'Platform token verified', 'code': 0, 'timestamp': '2026-02-06T11:16:13.100636'}
2026-02-06 03:16:13,109 - routers.auth - INFO - [token/exchange] Token verified, platform_user_id=950471, email=1926375372cgy@gmail.com
2026-02-06 03:16:13,109 - routers.auth - INFO - [token/exchange] Admin user verified, issuing admin token without DB persistence
2026-02-06 03:16:13,109 - routers.auth - DEBUG - [token/exchange] Admin user object for token issuance: id=950471, email=1926375372cgy@gmail.com, role=admin
2026-02-06 03:16:13,110 - core.config - DEBUG - Read dynamic attribute jwt_expire_minutes from environment variable JWT_EXPIRE_MINUTES
2026-02-06 03:16:13,110 - core.config - DEBUG - Read dynamic attribute jwt_secret_key from environment variable JWT_SECRET_KEY
2026-02-06 03:16:13,111 - core.config - DEBUG - Read dynamic attribute jwt_algorithm from environment variable JWT_ALGORITHM
2026-02-06 03:16:13,258 - core.auth - DEBUG - Authentication token created for user hash: f73410a3
2026-02-06 03:16:13,260 - routers.auth - INFO - [token/exchange] Token issued successfully for user_id=950471, expires_at=2026-03-08 11:16:13.110595+00:00
2026-02-06 03:16:13,260 - core.database - DEBUG - [DB_OP] Database session cleanup after 2.0099s
2026-02-06 03:16:13,264 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 06 Feb 2026 11:16:13 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-response-time', b'0.002s'), (b'x-request-id', b'3784ef4a5b94d58b72d3b3f36376a343'), (b'cf-cache-status', b'DYNAMIC'), (b'Content-Encoding', b'gzip'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9c9a3beddf008e47-LAX')])
2026-02-06 03:16:13,265 - httpx - INFO - HTTP Request: POST https://auth.atoms.dev/api/v1/oidc/platform/tokens/verify "HTTP/1.1 200 OK"
2026-02-06 03:16:13,265 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-02-06 03:16:13,266 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-02-06 03:16:13,266 - httpcore.http11 - DEBUG - response_closed.started
2026-02-06 03:16:13,267 - httpcore.http11 - DEBUG - response_closed.complete
2026-02-06 03:16:13,267 - httpcore.connection - DEBUG - close.started
2026-02-06 03:16:13,268 - httpcore.connection - DEBUG - close.complete
2026-02-06 03:16:13,268 - routers.auth - DEBUG - [token/exchange] Issuer response status: 200
2026-02-06 03:16:13,268 - routers.auth - DEBUG - [token/exchange] Issuer response body: {'success': True, 'data': {'exp': 1772967888, 'user_id': 950471, 'email': '1926375372cgy@gmail.com', 'pv': 0}, 'message': 'Platform token verified', 'code': 0, 'timestamp': '2026-02-06T11:16:13.118679'}
2026-02-06 03:16:13,270 - routers.auth - INFO - [token/exchange] Token verified, platform_user_id=950471, email=1926375372cgy@gmail.com
2026-02-06 03:16:13,270 - routers.auth - INFO - [token/exchange] Admin user verified, issuing admin token without DB persistence
2026-02-06 03:16:13,270 - routers.auth - DEBUG - [token/exchange] Admin user object for token issuance: id=950471, email=1926375372cgy@gmail.com, role=admin
2026-02-06 03:16:13,271 - core.auth - DEBUG - Authentication token created for user hash: f73410a3
2026-02-06 03:16:13,271 - routers.auth - INFO - [token/exchange] Token issued successfully for user_id=950471, expires_at=2026-03-08 11:16:13.270817+00:00
2026-02-06 03:16:13,272 - core.database - DEBUG - [DB_OP] Database session cleanup after 0.2381s
